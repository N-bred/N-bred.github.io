window.addEventListener('load',function(){const requestToApi=async url=>{const request=await fetch(url);const response=await request.json();return response};(function loadUserInfo(){const description=document.getElementById('description');const profileImg=document.getElementById('profile-img');const name=document.getElementById('name');const userApi='https://api.github.com/users/N-bred';const requestToUserApi=requestToApi(userApi);requestToUserApi.then(data=>{description.innerText=data.bio;profileImg.src=data.avatar_url;name.innerText=data.name}).catch(err=>console.error(err))})();(function loadUserRepos(){const cardsContainerElement=document.querySelector('.cards-container');const reposApi='https://api.github.com/users/N-bred/repos?sort=pushed?direction=asc';const requestToReposApi=requestToApi(reposApi);const formatData=string=>string.replace(/\-/g,' ').replace(/\_/g,' ');const createCard=function(title,description,github,page,img='./fox.jpg'){const template=`
  <div class="card">
        
            <div class="card__img">
              <a href="https://n-bred.github.io/${page}/index.html" class="card__img-link" target="_blank">
                <img src="${img}" alt="${formatData(title)}" />
              </a>
            </div>


            <div class="card__title">
              <h3 class="card__title-text">${formatData(title)}</h3>
            </div>

            <div class="card__description">
              <p class="card__description-text">
                ${description}
              </p>
            </div>

            <div class="card__btns">
              <a href="${github}" class="card__btn card__btn--white" target="_blank">See on Github</a>
              <a href="https://n-bred.github.io/${page}/index.html" class="card__btn  card__btn--dark" target="_blank">See Demo</a>
            </div>
          </div>

     
  `;return template};const limit=6;const pagination={initial:1,final:limit};const prevBtn=document.getElementById('prev');const nextBtn=document.getElementById('next');const prevPage=function(e,initial,finish){e.preventDefault();cardsContainerElement.innerHTML='';requestToReposApi.then(data=>{renderToDOM(data,initial,finish)}).catch(err=>console.log(err))};const nextPage=function(e,initial,finish){e.preventDefault();cardsContainerElement.innerHTML='';requestToReposApi.then(data=>{renderToDOM(data,initial,finish)}).catch(err=>console.log(err))};nextBtn.addEventListener('click',e=>{pagination.initial+=limit;pagination.final+=limit;if(pagination.initial>=pagination.total-limit){pagination.initial=pagination.total-limit}
if(pagination.final>=pagination.total){pagination.final=pagination.total-1}
if(pagination.final===pagination.total-1){alert('No repos found')}
nextPage(e,pagination.initial,pagination.final)});prevBtn.addEventListener('click',e=>{pagination.initial-=limit;pagination.final-=limit;if(pagination.initial<=1){pagination.initial=1}
if(pagination.final<=limit){pagination.final=limit}
prevPage(e,pagination.initial,pagination.final)});const renderToDOM=function(data,initial,next){for(let i=initial;i<=next;i++){if(data[i].has_pages){const{description,name,html_url}=data[i];const imgUrl=`https://github.com/N-bred/${name}/blob/master/frontCard.png?raw=true`;const repoEl=createCard(name,description,html_url,name,imgUrl);cardsContainerElement.innerHTML+=repoEl}}};requestToReposApi.then(data=>{renderToDOM(data,pagination.initial,pagination.final);pagination.total=data.length}).catch(err=>console.log(err))})();(function loadStatic(){const loader=document.querySelector('.loader');setTimeout(()=>{loader.classList.add('loader-done');document.body.classList.remove('on-load');window.scrollTo({top:0})},2000);const btnProjects=document.getElementById('btn-projects');const mainElement=document.querySelector('.main');btnProjects.addEventListener('click',e=>{e.preventDefault();window.scrollTo({top:mainElement.offsetTop,behavior:'smooth'})});const date=new Date();const year=document.getElementById('year');year.innerText=date.getFullYear()})()})